# ========== BASIC ==========
server.port=8080
spring.application.name=api-gateway
spring.threads.virtual.enabled=true

# ========== GATEWAY TARGETS ==========
gateway.routes.member.uri=http://member:8081
gateway.routes.member.path=/members/**
gateway.routes.product.uri=http://product:8082
gateway.routes.product.path=/products/**
gateway.routes.cart.uri=http://cart:8083
gateway.routes.cart.path=/cart/**

# ========== GATEWAY ROUTES ==========
spring.cloud.gateway.server.webmvc.routes[0].id=member-service
spring.cloud.gateway.server.webmvc.routes[0].uri=${gateway.routes.member.uri}
spring.cloud.gateway.server.webmvc.routes[0].predicates[0]=Path=${gateway.routes.member.path}

spring.cloud.gateway.server.webmvc.routes[1].id=product-service
spring.cloud.gateway.server.webmvc.routes[1].uri=${gateway.routes.product.uri}
spring.cloud.gateway.server.webmvc.routes[1].predicates[0]=Path=${gateway.routes.product.path}

spring.cloud.gateway.server.webmvc.routes[2].id=cart-service
spring.cloud.gateway.server.webmvc.routes[2].uri=${gateway.routes.cart.uri}
spring.cloud.gateway.server.webmvc.routes[2].predicates[0]=Path=${gateway.routes.cart.path}

# ========== SECURITY ==========
security.public-paths[0]=/actuator/**
security.public-paths[1]=/auth/**
security.public-paths[2]=/products/**

# ========== RATE LIMITER ==========
rate-limiter.enabled=true
rate-limiter.requests-per-minute=120
rate-limiter.ignored-paths[0]=/actuator/**

# ========== MEMBER SERVICE CLIENT ==========
services.clients.member.base-url=${gateway.routes.member.uri}
services.clients.member.endpoints.validate-credentials=/members/internal/auth/validate-credentials
services.clients.member.endpoints.register=/members/internal/auth/register
services.clients.member.connect-timeout=3000
services.clients.member.read-timeout=5000

# ========== REDIS ==========
spring.data.redis.host=redis
spring.data.redis.port=6379

# ========== JWT ==========
security.jwt.secret-key=${SECURITY_JWT_SECRET_KEY}
security.jwt.expiration-minutes=60

server.tomcat.redirect-context-root=false